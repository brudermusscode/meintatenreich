function loadShop(e,a,t){let n,i;addLoader(t),$.ajax({data:e,url:a,method:"POST",type:"HTML",success:function(e){n=t.find("loader").remove(),"0"===e?(i="Oh nein! Ein Fehler!",showDialer(i)):t.append(e)}})}$(function(){function e(){if(!n.hasClass("loading")&&n.hasClass("shop")){addOverlay(n);let e=n.find("page-overlay");e.find("close-overlay").remove();addLoader(e,"floating");$("loader").parent();n.addClass("loading")}!1!==r&&clearTimeout(r),r=setTimeout(function(){function e(e,a){a.addClass("active"),a.empty(),a.append(e)}function o(e,n){"shop"===n?(e.removeClass("active"),e.empty(),loadShop(t,a,i)):(e.removeClass("active"),e.empty())}i=$('[data-react="load-products"]'),a=dynamicHost+"/ajax/content/shop/overview",t="action=get-products&order=id";let d,s,c=$.trim($('[data-action="search"]').val()).length,l=$('[data-action="search"]').val(),u=$('[data-react="search"]'),m="search",f=n.find("page-overlay");if(n.hasClass("shop")?(s="shop",u=i,d={action:m,q:l,l:s}):(s="else",u=u,d={action:m,q:l,l:s}),c>0){let a=dynamicHost+"/ajax/content/shop/search";$.ajax({data:d,url:a,method:"POST",type:"HTML",success:function(a){e(a,u),f.removeAttr("style"),setTimeout(function(){f.remove(),n.removeClass("loading")},400)}})}else o(u,s),f.removeAttr("style"),setTimeout(function(){f.remove(),n.removeClass("loading")},400);r=!1},250)}let a,t,n=$("body"),i=$('[data-react="load-products"]');if(n.hasClass("shop"))a=dynamicHost+"/ajax/content/shop/overview",t="action=get-products&order=id",loadShop(t,a,i);else if(n.hasClass("search")){var o=n.find("#main").data("json")[0].q;a=dynamicHost+"/ajax/content/shop/search-redirect",t="action=get-products&order=id&q="+o,loadShop(t,a,i)}$(document).on("click",'[data-action="sort-products"] .list ul li',function(){var e,t=$(this),r=t.data("json"),d=r[0].order;e=n.hasClass("shop")?"action=get-products&order="+d:"action=get-products&order="+d+"&q="+o;let s=$('[data-ability="keep"][data-input="products:sort,order"]');s.val(d),addOverlay(n);var c=n.find("page-overlay");addLoader(c,"floating");$("loader").parent();$.ajax({data:e,url:a,method:"POST",type:"HTML",success:function(e){i.empty(),i.append(e),c.removeAttr("style"),setTimeout(function(){c.remove()},400)}})}),$(document).on("click",'[data-action="products:sort,category"] .list ul li',function(){var e,t=$(this),r=t.data("json"),d=r[0].id;let s=$('[data-ability="keep"][data-input="products:sort,order"]'),c=s.val();e=n.hasClass("shop")?"action=get-category&order="+c+"&cat="+d:"action=get-category&order="+c+"&cat="+d+"&q="+o,addOverlay(n);var l=n.find("page-overlay");addLoader(l,"floating");$("loader").parent();$.ajax({data:e,url:a,method:"POST",type:"HTML",success:function(e){i.empty(),i.append(e),l.removeAttr("style"),setTimeout(function(){l.remove()},400)}})}).on("keyup",'[data-action="search"]',function(e){if(13==e.keyCode){var a=$(this).val();window.location.replace("/search?q="+a)}}).on("input textInput paste",'[data-action="search"]',e);let r=!1;$(document).on("click",'[data-action="add-payment-method"]',function(){let e=dynamicHost+"/ajax/popups/add-billing";addOverlay(n);var a=n.find("page-overlay");addLoader(a,"floating");var t=$("loader").parent(),i="add-payment-method";$.ajax({url:e,data:{action:i},method:"POST",type:"HTML",success:function(e){switch(e){case"0":console.log("Someone likes to play");break;default:t.remove(),a.append(e)}}})}).on("click",'[data-action="request-add-payment-method"]',function(){var e=$('[data-form="payment-method"]'),a=$.trim(e.find('input[name="acc"]').val()),t=$.trim(e.find('input[name="bic"]').val()),i=$.trim(e.find('input[name="iban"]').val());if(""===a||""===t||""===i)showDialer("Bitte fülle alle Felder aus!");else{var o=n.find("page-overlay"),r=$("wide-container");addOverlay(r,dark=!0);var d=r.find("page-overlay");addLoader(d,"floating"),d.find("close-overlay").remove();let e,s,c,l=$('[data-form="payment-method"]').serialize(),u=$('[data-react="add-content"]'),m=dynamicHost+"/ajax/functions/shop/add-billing";$.ajax({url:m,data:l,method:"POST",type:"TEXT",success:function(l){switch(l){case"0":e="Oh nein! Ein Fehler!";break;case"1":e="Der Kontoinhaber enthält ungültige Zeichen";break;case"2":e="Die BIC (Swift-Code) enthält ungültige Zeichen";break;case"3":e="Die IBAN enthält ungültige Zeichen";break;case"4":e="Die BIC (Swift-Code) kann nur aus 8-11 Zeichen bestehen";break;case"5":e="Die IBAN muss mindestens aus 16 bis maximal aus 34 Zeichen bestehen";break;default:e="Erfolgreich hinzugefügt!",l=$.parseJSON(l),s=l.pmid,c=l.sepa,r.remove(),addTextDialogue(o,"Erfolgreich hinzugefügt!"),setTimeout(function(){o.removeAttr("style"),setTimeout(function(){o.remove()},400)},1e3),n.hasClass("scard")&&getScardOverview(),m=dynamicHost+"/ajax/content/elements/billing",$.ajax({url:m,data:{acc:a,bic:t,iban:i,pmid:s,sepa:c},method:"POST",type:"HTML",success:function(a){switch(a){case"0":e="Something went wrong";break;default:u.prepend(a)}}})}showDialer(e),d.css("opacity","0"),setTimeout(function(){d.remove()},200)}})}}).on("click",'[data-action="edit-payment-method"]',function(){addOverlay(n);var e=n.find("page-overlay");addLoader(e,"floating");var a=$("loader").parent(),t="edit-payment-method",i=$(this),o=i.data("json"),r=o[0].pmid;let d=dynamicHost+"/ajax/popups/edit-billing";$.ajax({url:d,data:{action:t,pmid:r},method:"POST",type:"HTML",success:function(t){switch(t){case"0":case"1":res="Something went wrong";break;default:a.remove(),e.append(t)}}})}).on("click",'[data-action="request-edit-payment-method"]',function(){let e=n.find("page-overlay"),a=$("wide-container");addOverlay(a,dark=!0);let t=a.find("page-overlay");addLoader(t,"floating"),t.find("close-overlay").remove();let i,o=$('[data-form="edit-payment-method"]').serializeArray(),r=$('[data-form="edit-payment-method"]').serialize(),d=$("#np-"+o[0].value),s=d.find("[react-edit-account]"),c=dynamicHost+"/ajax/functions/shop/edit-billing";$.ajax({url:c,data:r,method:"POST",type:"TEXT",success:function(n){switch(n){case"0":case"1":i="Oh nein! Ein Fehler!";break;case"2":i="Der eingegebene Kontoinhaber enthält ungültige Zeichen";break;default:i="Die Bankverbindung wurde erfolgreich bearbeitet",a.remove(),addTextDialogue(e,"Erfolgreich gespeichert!"),s.html(n),setTimeout(function(){e.removeAttr("style"),setTimeout(function(){e.remove()},400)},1e3)}showDialer(i),t.css("opacity","0"),setTimeout(function(){t.remove()},200)}})}).on("click",'[data-action="delete-payment-method"]',function(){let e=$(this),a=e.data("json"),t=a[0].id,n=a[0].which,i="delete",o=$("body").find("wide-container"),r=o.find(".zoom-in");addOverlay(r,dark=!0);let d=r.find("page-overlay");d.find("close-overlay").remove();addLoader(d,"floating");let s=d.find("loader").parent(),c=dynamicHost+"/ajax/content/elements/delete-confirmation";$.ajax({url:c,data:{action:i,id:t},method:"POST",type:"HTML",success:function(e){switch(e){case"0":console.log("Someone likes to play");break;default:s.remove(),d.prepend(e);d.find('input[name="which"]').val(n)}}})}).on("click",'[data-action="add-address"]',function(){addOverlay(n);let e=n.find("page-overlay");addLoader(e,"floating");let a=$("loader").parent(),t="add-address",i=dynamicHost+"/ajax/popups/add-address";$.ajax({url:i,data:{action:t},method:"POST",type:"HTML",success:function(t){switch(t){case"0":showDialer("Bruder");break;default:a.remove(),e.append(t)}}})}).on("click",'[data-action="request-add-address"]',function(){let e=$('[data-form="address"]').serializeArray();if(""==e[0].value||""==e[1].value||""==e[2].value||""==e[3].value||""==e[5].value||""==e[6].value||""==e[7].value)showDialer("Bitte fülle alle erforderlichen Felder aus");else{let e=n.find("page-overlay"),a=$("wide-container");addOverlay(a,dark=!0);let t=a.find("page-overlay");addLoader(t,"floating"),t.find("close-overlay").remove();let i,o=$('[data-form="address"]').serialize(),r=$('[data-react="add-content"]'),d=dynamicHost+"/ajax/functions/shop/add-address";$.ajax({url:d,data:o,method:"POST",type:"TEXT",success:function(s){switch(s){case"0":i="Oh nein! Ein Fehler!";break;case"1":i="Die eingegebene Straße enthält ungültige Zeichen";break;case"2":i="Die eingegebene Hausnummer enthält ungültige Zeichen";break;case"3":i="Die eingegebene Postleitzahl enthält ungültige Zeichen";break;case"4":i="Die eingegebene Stadt enthält ungültige Zeichen";break;case"5":i="Der eingegebene Adresszusatz enthält ungültige Zeichen";break;case"6":i='Die eingegebene Telefonnummer enthält ungültige Zeichen. Erlaubt sind 0-9, "/", "+"';break;default:let t,c,l;t=s.adid,c=s.street,l=s.housenumber,i="Ihre Adresse wurde erfolgreich hinzugefügt!",o=o+"&adid="+t+"&address="+c+"%20"+l,d=dynamicHost+"/ajax/content/elements/address",a.remove(),addTextDialogue(e,"Erfolgreich hinzugefügt!"),setTimeout(function(){e.removeAttr("style"),setTimeout(function(){e.remove()},400)},1e3),n.hasClass("scard")&&getScardOverview(),$.ajax({url:d,data:o,method:"POST",type:"HTML",success:function(e){switch(e){case"0":i="Something went wrong";break;default:r.prepend(e)}}})}showDialer(i),t.css("opacity","0"),setTimeout(function(){t.remove()},200)},error:function(e){console.error(e.responseText)}})}}).on("click",'[data-action="edit-address"]',function(){addOverlay(n);var e=n.find("page-overlay");addLoader(e,"floating");var a=$("loader").parent(),t="edit-address",i=$(this),o=i.data("json"),r=o[0].adid;console.error(r,o);let d=dynamicHost+"/ajax/popups/edit-address";$.ajax({url:d,data:{action:t,adid:r},method:"POST",type:"HTML",success:function(t){switch(t){case"0":case"1":console.log("Someone likes to play");break;default:a.remove(),e.append(t)}}})}).on("click",'[data-action="request-edit-address"]',function(){var e=$('[data-form="edit-payment-method"]'),a=($.trim(e.find('input[name="fullname"]').val()),$.trim(e.find('input[name="country"]').val()),$.trim(e.find('input[name="str"]').val()),$.trim(e.find('input[name="hnr"]').val()),$.trim(e.find('input[name="extra"]').val()),$.trim(e.find('input[name="city"]').val()),$.trim(e.find('input[name="postcode"]').val()),$.trim(e.find('input[name="tel"]').val()),$.trim(e.find('input[name="adid"]').val()),n.find("page-overlay")),t=$("wide-container");addOverlay(t,dark=!0);var i=t.find("page-overlay");addLoader(i,"floating"),i.find("close-overlay").remove();var o,r=$('[data-form="edit-address"]').serialize();$('[data-react="add-content"]');$.ajax({data:r,url:"/ajax/editaddress",method:"POST",type:"TEXT",success:function(e){switch(e){case"0":o="Ein unbekannter Fehler ist aufgetreten!";break;case"1":o="Ein Fehler ist aufgetreten. Dieser wurde wahrscheinlich durch Manipulation über die Developer-Konsole ausgelöst und wurde in unserem System vermerkt.";break;case"2":o="Ihre Adresse ist ungültig!";break;case"3":o="Ihre Postleitzahl ist ungültig!";break;case"4":o="Ihr Stadt-Name enthält ungültige Zeichen!";break;case"5":o="Ihr Adresszusatz enthält ungültige Zeichen!";break;case"6":o="Ihre Telefonnummer ist ungültig!";break;case"7":o="Ihre Name enthält ungültige Zeichen!";break;default:o="Ihre Adresse wurde erfolgreich bearbeitet!",t.remove(),addTextDialogue(a,"Erfolgreich gespeichert!"),setTimeout(function(){a.removeAttr("style"),setTimeout(function(){a.remove()},400)},1e3)}showDialer(o),i.css("opacity","0"),setTimeout(function(){i.remove()},200)}})}).on("click",'[data-action="delete-address"]',function(){var e=$(this),a=e.data("json"),t=a[0].id,n=a[0].which,i="delete",o=$("body").find("wide-container"),r=o.find(".zoom-in");addOverlay(r,dark=!0);var d=r.find("page-overlay");d.find("close-overlay").remove();addLoader(d,"floating");var s=d.find("loader").parent();let c=dynamicHost+"/ajax/content/elements/delete-confirmation";$.ajax({url:c,data:{action:i,id:t},method:"POST",type:"HTML",success:function(e){s.remove(),d.prepend(e);d.find('input[name="which"]').val(n)}})}).on("click",'[data-action="request-delete"]',function(){var e=$(this),a=e.data("json"),t=a[0].id,i=n.find("page-overlay"),o=i.find("wide-container"),r=o.find('input[name="which"]').val(),d=n.find('wide-container page-overlay [data-structure="confirm-window"] .zoom-in');addOverlay(d,dark=!0);var s=d.find("page-overlay");s.find("close-overlay").remove(),addLoader(s,"floating");var c,l,u;s.find("loader");"address"===r?(c="/ajax/functions/shop/delete-address",l="Adresse"):"billing"===r&&(c="/ajax/functions/shop/delete-billing",l="Bankverbindung"),$.ajax({url:c,data:{id:t},method:"POST",type:"TEXT",success:function(e){var a=$('[data-react="add-content"]').find("#np-"+t);switch(e){case"0":u="Oh nein! Ein Fehler!";break;default:u=l+" erfolgreich entfernt!",o.remove(),a.fadeOut(800),addTextDialogue(i,"Erfolgreich gelöscht!"),setTimeout(function(){i.removeAttr("style"),setTimeout(function(){i.remove()},400)},1e3)}showDialer(u),s.removeAttr("style"),setTimeout(function(){s.remove()},400)},error:function(e){}})}).on("click",'[data-action="cancel-delete"]',function(){var e=n.find("wide-container .zoom-in page-overlay").removeAttr("style");setTimeout(function(){e.remove()},400)}).on("click",'[data-action="cancel-order"]',function(){addOverlay(n,dark=!0);let e=n.find("page-overlay");addLoader(e,"floating");let a=e.find("loader").parent(),t=$(this).data("json")[0].id,i="cancel-order",o=dynamicHost+"/ajax/content/elements/cancelorder-confirmation";$.ajax({url:o,data:{action:i,id:t},method:"POST",type:"HTML",success:function(t){switch(t){case"0":console.log("someone likes to play");break;default:a.remove(),e.append(t)}},error:function(e){console.error(e.responseText)}})}).on("click",'[data-action="request-cancel-order"]',function(){var e=n.find("page-overlay"),a=(e.find("close-overlay").remove(),e.find("wide-container"));addOverlay(a,dark=!0);var t=a.find("page-overlay");t.find("close-overlay").remove();addLoader(t,"floating");t.find("loader").parent();let i,o=$(this).data("json")[0].id,r="request-cancel-order",d=dynamicHost+"/ajax/functions/orders/cancel";$.ajax({url:d,data:{action:r,id:o},method:"POST",type:"TEXT",success:function(e){switch(e){case"0":case"1":i="Oh nein! Ein Fehler!";break;case"2":i="Die Stornierungsfrist von 2 Stunden ist bereits abgelaufen",closePageoverlay();break;default:i="Stornierung erfolgreich, bitte warten...",setTimeout(function(){window.location.replace(window.location)},1200)}showDialer(i)},error:function(e){}})}).on("click",'[data-action="manage:order,pay"]',function(){let e,a=$(this),t=a.data("json")[0].id,n={id:t},i=dynamicHost+"/ajax/functions/orders/pay";showDialer("Bitte warten...");$.ajax({url:i,data:n,method:"POST",type:"JSON",success:function(t){switch(t){case"0":case"1":e="Oh nein! Ein Fehler!";break;default:e="Als bezahlt markiert",a.removeAttr("data-action data-json").attr("disabled","disabled").html("Als bezahlt markiert").toggleClass("hlf-white-s hlf-blue-s")}showDialer(e)}})}).on("click",'[data-action="order:received,confirm"]',function(){let e,a=$(this),t=a.data("json")[0].id,n={id:t},i=dynamicHost+"/ajax/functions/orders/confirm-received";$.ajax({url:i,data:n,type:"TEXT",method:"POST",success:function(t){switch(t){case"0":case"1":console.log("someone likes to play");break;default:e="Vielen Dank für die Bestätigung!",a.attr("disabled","disabled"),a.html("Ware erhalten bestätigt")}showDialer(e)}})})});