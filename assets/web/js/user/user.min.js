$(function(){function e(){let e=$('[data-react="save-settings"]');e.css("opacity",".5").removeClass("success failure").addClass("glow"),!1!==t&&clearTimeout(t),t=setTimeout(function(){var a,s=$('[data-form="settings"]').serialize();let n=dynamicHost+"/ajax/functions/user/settings";$.ajax({url:n,data:s,method:"POST",type:"TEXT",success:function(t){switch(e.removeClass("glow"),t){case"0":a="Oh nein! Ein Fehler!";break;case"1":a="Dein gewählter Anzeigename enthält ungültige Zeichen, bitte wähle zwischen Buchstaben und Zahlen",e.removeAttr("style").addClass("failure");break;case"2":a="Dein gewählter Anzeigename wird bereits verwendet",e.removeAttr("style").addClass("failure");break;case"3":a="Dein gewählter Vorname enthält ungültige Zeichen",e.removeAttr("style").addClass("failure");break;case"4":a="Dein gewählter Nachname enthält ungültige Zeichen",e.removeAttr("style").addClass("failure");break;default:a="Erfolgreich gespeichert!",e.removeAttr("style").addClass("success")}showDialer(a)}}),t=!1},750)}let a=$("body");$(document).on("click",'[data-action="open-settings"]',function(){let e=$(this),t=e.attr("data-json"),s=!1,n=dynamicHost+"/ajax/popups/settings.php";if(void 0!==t&&!1!==t){let a=e.data("json");s=a[0].which}let r="open-settings";addOverlay(a);let i=$("page-overlay");addLoader(i,"floating");let o=$("loader").parent();$.ajax({url:n,data:{action:r,which:s},method:"POST",type:"HTML",success:function(e){o.remove(),i.append(e)}})}).on("textInput input paste",'[data-form="settings"] input',e);var t=!1;$(document).on("click",'[data-action="open-change-password"]',function(){addOverlay(a);var e=a.find("page-overlay");addLoader(e,"floating");var t=$("loader").parent(),s="open-change-password";let n=dynamicHost+"/ajax/popups/change-password";$.ajax({url:n,data:{action:s},method:"POST",type:"HTML",success:function(a){t.remove(),e.append(a)}})}).on("click",'[data-action="request-password-change"]',function(){var e=$.trim($('[data-form="change-password"] input[name="oldpass"]').val()),t=$.trim($('[data-form="change-password"] input[name="newpass"]').val()),s=$.trim($('[data-form="change-password"] input[name="newpass2"]').val());if(""===e||""===t||""===s)showDialer("Bitte fülle alle Felder aus!");else if(!t==s)showDialer("Ihre neuen Passwörter stimmen nicht überein!");else{var n=a.find("page-overlay"),r=$("wide-container");addOverlay(r,dark=!0);var i=r.find("page-overlay");addLoader(i,"floating"),i.find("close-overlay").remove();var o,l=$('[data-form="change-password"]').serialize();let e=dynamicHost+"/ajax/functions/user/change-password";$.ajax({url:e,data:l,method:"POST",type:"TEXT",success:function(e){switch(e){case"0":o="Ein unbekannter Fehler ist aufgetreten";break;case"1":o="Das derzeitig verwendete Passwort ist falsch";break;case"2":o="Die Passwordbestätigung war ungültig";break;case"3":o="Bitte verwende nicht dein altes Passwort";break;case"4":o="Das Passwort sollte mindestens aus 8 Zeichen bestehen";break;case"5":o="Ihr Passwort enthält ungültige Zeichen!";var a=$('[data-react="change-password"]');a.html("Gültige Zeichen sind: a-z, A-Z, 0-9, =.,_-+*#~?!&%$§");break;default:o="Ihr Passwort wurde erfolgreich geändert!",r.remove(),addTextDialogue(n,"Erfolgreich geändert!"),setTimeout(function(){n.removeAttr("style"),setTimeout(function(){n.remove()},400)},1e3)}showDialer(o),i.css("opacity","0"),setTimeout(function(){i.remove()},200)},error:function(e){}})}})});